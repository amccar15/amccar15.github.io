{"ast":null,"code":"var _jsxFileName = \"/Users/macuser/Documents/amccar15.github.io/src/pages/showSearch.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { collection, getDocs, query, where } from 'firebase/firestore';\nimport { db } from '../firebase-config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ShowSearch() {\n  _s();\n\n  const {\n    type,\n    search\n  } = useParams();\n  const postsCollectionRef = collection(db, \"posts\");\n  const [post, setPost] = useState([]);\n  useEffect(() => {\n    if (post === 'title') {\n      const q = query(postsCollectionRef, where(type, '==', search));\n      getPosts(q);\n    }\n\n    if (post === 'author') {\n      const q = query(postsCollectionRef, where(type + \".name\", '==', search));\n      getPosts(q);\n    }\n  }, []);\n\n  const getPosts = async qSearch => {\n    const docData = await getDocs(qSearch);\n    setPost(docData.docs.map(doc => ({ ...doc.data(),\n      id: doc.id\n    })));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [post !== null && post.map(p => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: p.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 24\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: post === null && /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"No posts where found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ShowSearch, \"NQRv+UE4cjC1DKP8mYdAywXxoUo=\", false, function () {\n  return [useParams];\n});\n\n_c = ShowSearch;\nexport default ShowSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShowSearch\");","map":{"version":3,"names":["React","useEffect","useState","useParams","collection","getDocs","query","where","db","ShowSearch","type","search","postsCollectionRef","post","setPost","q","getPosts","qSearch","docData","docs","map","doc","data","id","p","title"],"sources":["/Users/macuser/Documents/amccar15.github.io/src/pages/showSearch.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport {collection, getDocs, query, where} from 'firebase/firestore';\nimport { db } from '../firebase-config';\n\nfunction ShowSearch() {\n\n    const {type, search} = useParams();\n\n    const postsCollectionRef = collection(db, \"posts\");\n\n    const [post, setPost] = useState([]);\n\n    useEffect(() => {\n        if(post === 'title') {\n            const q = query(postsCollectionRef, where(type, '==', search));\n            getPosts(q);\n        }\n        if(post === 'author') {\n            const q = query(postsCollectionRef, where(type+\".name\", '==', search));\n            getPosts(q);\n        }\n    }, []);\n\n    const getPosts = async (qSearch) => {\n        const docData = await getDocs(qSearch);\n        setPost(docData.docs.map((doc) => (\n                {...doc.data(), id: doc.id}\n            )\n        ));\n    }\n\n    return(\n        <div>\n            {post !== null && post.map((p) => {\n                return <div>\n                    <h1>{p.title}</h1>\n                </div>\n            })}\n            <div>\n                {post === null && (\n                    <h1>No posts where found</h1>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default ShowSearch;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAAQC,UAAR,EAAoBC,OAApB,EAA6BC,KAA7B,EAAoCC,KAApC,QAAgD,oBAAhD;AACA,SAASC,EAAT,QAAmB,oBAAnB;;;AAEA,SAASC,UAAT,GAAsB;EAAA;;EAElB,MAAM;IAACC,IAAD;IAAOC;EAAP,IAAiBR,SAAS,EAAhC;EAEA,MAAMS,kBAAkB,GAAGR,UAAU,CAACI,EAAD,EAAK,OAAL,CAArC;EAEA,MAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,EAAD,CAAhC;EAEAD,SAAS,CAAC,MAAM;IACZ,IAAGY,IAAI,KAAK,OAAZ,EAAqB;MACjB,MAAME,CAAC,GAAGT,KAAK,CAACM,kBAAD,EAAqBL,KAAK,CAACG,IAAD,EAAO,IAAP,EAAaC,MAAb,CAA1B,CAAf;MACAK,QAAQ,CAACD,CAAD,CAAR;IACH;;IACD,IAAGF,IAAI,KAAK,QAAZ,EAAsB;MAClB,MAAME,CAAC,GAAGT,KAAK,CAACM,kBAAD,EAAqBL,KAAK,CAACG,IAAI,GAAC,OAAN,EAAe,IAAf,EAAqBC,MAArB,CAA1B,CAAf;MACAK,QAAQ,CAACD,CAAD,CAAR;IACH;EACJ,CATQ,EASN,EATM,CAAT;;EAWA,MAAMC,QAAQ,GAAG,MAAOC,OAAP,IAAmB;IAChC,MAAMC,OAAO,GAAG,MAAMb,OAAO,CAACY,OAAD,CAA7B;IACAH,OAAO,CAACI,OAAO,CAACC,IAAR,CAAaC,GAAb,CAAkBC,GAAD,KACjB,EAAC,GAAGA,GAAG,CAACC,IAAJ,EAAJ;MAAgBC,EAAE,EAAEF,GAAG,CAACE;IAAxB,CADiB,CAAjB,CAAD,CAAP;EAIH,CAND;;EAQA,oBACI;IAAA,WACKV,IAAI,KAAK,IAAT,IAAiBA,IAAI,CAACO,GAAL,CAAUI,CAAD,IAAO;MAC9B,oBAAO;QAAA,uBACH;UAAA,UAAKA,CAAC,CAACC;QAAP;UAAA;UAAA;UAAA;QAAA;MADG;QAAA;QAAA;QAAA;MAAA,QAAP;IAGH,CAJiB,CADtB,eAMI;MAAA,UACKZ,IAAI,KAAK,IAAT,iBACG;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAFR;MAAA;MAAA;MAAA;IAAA,QANJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAcH;;GAzCQJ,U;UAEkBN,S;;;KAFlBM,U;AA2CT,eAAeA,UAAf"},"metadata":{},"sourceType":"module"}