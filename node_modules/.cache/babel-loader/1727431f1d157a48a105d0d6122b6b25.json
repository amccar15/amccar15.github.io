{"ast":null,"code":"import _objectSpread from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{collection,getDocs,deleteDoc,doc}from'firebase/firestore';import{auth,db}from'../firebase-config';import{Link}from'react-router-dom';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Home(_ref){var isAuth=_ref.isAuth;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),postLists=_useState2[0],setPostList=_useState2[1];var postsCollectionRef=collection(db,\"posts\");var deletePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var postDoc;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:postDoc=doc(db,\"posts\",id);_context.next=3;return deleteDoc(postDoc);case 3:case\"end\":return _context.stop();}}},_callee);}));return function deletePost(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){var getPosts=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getDocs(postsCollectionRef);case 2:data=_context2.sent;setPostList(data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getPosts(){return _ref3.apply(this,arguments);};}();getPosts();},[deletePost]);return/*#__PURE__*/_jsx(\"div\",{className:\"homePage\",children:postLists.map(function(post){return/*#__PURE__*/_jsx(\"div\",{className:\"post\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"postHeader\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",post.title,\" \"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"deletePost\",children:isAuth&&post.author.id===auth.currentUser.uid&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){deletePost(post.id);},children:\" X\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"postTextContainer\",children:[\" \",post.postText,\" \"]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"@\",post.author.name]}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:{pathname:\"/thepost\"},state:{postInfo:post.id},children:\" View Post\"})})]})});})});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","collection","getDocs","deleteDoc","doc","auth","db","Link","Home","isAuth","postLists","setPostList","postsCollectionRef","deletePost","id","postDoc","getPosts","data","docs","map","post","title","author","currentUser","uid","postText","name","pathname","postInfo"],"sources":["/Users/macuser/Documents/amccar15.github.io/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {collection, getDocs, deleteDoc, doc} from 'firebase/firestore';\nimport { auth, db } from '../firebase-config';\nimport { Link } from 'react-router-dom';\n\n\nfunction Home({ isAuth }) {\n    const [postLists, setPostList] = useState([]);\n\n    const postsCollectionRef = collection(db, \"posts\");\n\n    const deletePost = async (id) => {\n        const postDoc = doc(db, \"posts\", id);\n        await deleteDoc(postDoc);\n    }\n\n    useEffect(() => {\n        const getPosts = async () => {\n            const data = await getDocs(postsCollectionRef);\n            setPostList(data.docs.map((doc) => (\n                { ...doc.data(), id: doc.id}\n                )\n            ));\n        };\n        getPosts();\n    }, [deletePost]);\n\n    return (\n        <div className=\"homePage\">\n            {postLists.map((post) => {\n                return <div className=\"post\"> \n                    <div className=\"post\">\n                            <div className=\"postHeader\">\n                                <div className=\"title\">\n                                    <h1> {post.title} </h1>\n                                </div>\n                                <div className=\"deletePost\">\n                                    {isAuth && post.author.id === auth.currentUser.uid && (\n                                        <button \n                                            onClick={() => {\n                                                deletePost(post.id);\n                                            }}> X \n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n                        <div className=\"postTextContainer\"> {post.postText} </div>\n                        <h3>@{post.author.name}</h3>\n                        <button>\n                            <Link to={{pathname: \"/thepost\"}} state={{postInfo: post.id}}> View Post</Link>\n                        </button>\n                    </div>\n                </div>\n            })}\n        </div>\n    );\n}\n\nexport default Home;"],"mappings":"mhBAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAAQC,UAAR,CAAoBC,OAApB,CAA6BC,SAA7B,CAAwCC,GAAxC,KAAkD,oBAAlD,CACA,OAASC,IAAT,CAAeC,EAAf,KAAyB,oBAAzB,CACA,OAASC,IAAT,KAAqB,kBAArB,C,wFAGA,QAASC,KAAT,MAA0B,IAAVC,OAAU,MAAVA,MAAU,CACtB,cAAiCV,QAAQ,CAAC,EAAD,CAAzC,wCAAOW,SAAP,eAAkBC,WAAlB,eAEA,GAAMC,mBAAkB,CAAGX,UAAU,CAACK,EAAD,CAAK,OAAL,CAArC,CAEA,GAAMO,WAAU,6FAAG,iBAAOC,EAAP,gIACTC,OADS,CACCX,GAAG,CAACE,EAAD,CAAK,OAAL,CAAcQ,EAAd,CADJ,uBAETX,UAAS,CAACY,OAAD,CAFA,uDAAH,kBAAVF,WAAU,6CAAhB,CAKAb,SAAS,CAAC,UAAM,CACZ,GAAMgB,SAAQ,6FAAG,0KACMd,QAAO,CAACU,kBAAD,CADb,QACPK,IADO,gBAEbN,WAAW,CAACM,IAAI,CAACC,IAAL,CAAUC,GAAV,CAAc,SAACf,GAAD,wCACjBA,GAAG,CAACa,IAAJ,EADiB,MACLH,EAAE,CAAEV,GAAG,CAACU,EADH,IAAd,CAAD,CAAX,CAFa,wDAAH,kBAARE,SAAQ,2CAAd,CAOAA,QAAQ,GACX,CATQ,CASN,CAACH,UAAD,CATM,CAAT,CAWA,mBACI,YAAK,SAAS,CAAC,UAAf,UACKH,SAAS,CAACS,GAAV,CAAc,SAACC,IAAD,CAAU,CACrB,mBAAO,YAAK,SAAS,CAAC,MAAf,uBACH,aAAK,SAAS,CAAC,MAAf,wBACQ,aAAK,SAAS,CAAC,YAAf,wBACI,YAAK,SAAS,CAAC,OAAf,uBACI,0BAAMA,IAAI,CAACC,KAAX,OADJ,EADJ,cAII,YAAK,SAAS,CAAC,YAAf,UACKZ,MAAM,EAAIW,IAAI,CAACE,MAAL,CAAYR,EAAZ,GAAmBT,IAAI,CAACkB,WAAL,CAAiBC,GAA9C,eACG,eACI,OAAO,CAAE,kBAAM,CACXX,UAAU,CAACO,IAAI,CAACN,EAAN,CAAV,CACH,CAHL,gBAFR,EAJJ,GADR,cAeI,aAAK,SAAS,CAAC,mBAAf,eAAqCM,IAAI,CAACK,QAA1C,OAfJ,cAgBI,0BAAML,IAAI,CAACE,MAAL,CAAYI,IAAlB,GAhBJ,cAiBI,qCACI,KAAC,IAAD,EAAM,EAAE,CAAE,CAACC,QAAQ,CAAE,UAAX,CAAV,CAAkC,KAAK,CAAE,CAACC,QAAQ,CAAER,IAAI,CAACN,EAAhB,CAAzC,wBADJ,EAjBJ,GADG,EAAP,CAuBH,CAxBA,CADL,EADJ,CA6BH,CAED,cAAeN,KAAf"},"metadata":{},"sourceType":"module"}