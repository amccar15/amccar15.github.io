{"ast":null,"code":"import _regeneratorRuntime from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{addDoc,collection}from'firebase/firestore';import{db,auth}from'../firebase-config';import{useNavigate}from'react-router-dom';import{ContentState,Editor}from\"react-draft-wysiwyg\";import draftToHtml from'draftjs-to-html';import\"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";import{convertFromRaw,convertToRaw,EditorState}from\"draft-js\";import{convertFromHTML,convertToHTML}from\"draft-convert\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CreatePost(_ref){var isAuth=_ref.isAuth;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];//rich text editor state\nvar _useState3=useState({message:\"Enter your post here!\",rawMessage:''}),_useState4=_slicedToArray(_useState3,2),editorState=_useState4[0],setEditorState=_useState4[1];var _useState5=useState({convertMessage:'',messagePost:''}),_useState6=_slicedToArray(_useState5,2),postText=_useState6[0],setPostText=_useState6[1];//firebase collection \nvar postsCollectionRef=collection(db,\"posts\");//navigate function to navigate back to root file\nvar navigate=useNavigate();//sending data to firebase\nvar createPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return addDoc(postsCollectionRef,{title:title,postText:postText,author:{name:auth.currentUser.displayName,id:auth.currentUser.uid}});case 2:navigate(\"/\");case 3:case\"end\":return _context.stop();}}},_callee);}));return function createPost(){return _ref2.apply(this,arguments);};}();//checking if user is logged in\nuseEffect(function(){if(!isAuth){navigate(\"login\");}},[]);//converting to raw html\nvar onEditorStateChange=function onEditorStateChange(editorState){setEditorState({editorState:editorState,rawMessage:convertToHTML(editorState.getCurrentContent())});};//handling the message from rich text editor\nvar handleEditorStateMessage=function handleEditorStateMessage(){setEditorState({message:editorState.rawMessage});setPostText({messagePost:postText.convertMessage});console.log(\"editorstate: \",editorState.rawMessage);console.log(\"postText: \",postText.convertMessage);};return/*#__PURE__*/_jsx(\"div\",{className:\"createPostPage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cpContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Create a Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputGp\",children:[/*#__PURE__*/_jsx(\"label\",{children:\" Title: \"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title...\",onChange:function onChange(event){setTitle(event.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Editor,{initialEditorState:editorState,onEditorStateChange:onEditorStateChange,toolbarClassName:\"toolbarClassName\",wrapperClassName:\"wrapperClassName\",editorClassName:\"editorClassName\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){handleEditorStateMessage();},children:\" Submit Post\"})]})});}export default CreatePost;","map":{"version":3,"names":["React","useState","useEffect","addDoc","collection","db","auth","useNavigate","ContentState","Editor","draftToHtml","convertFromRaw","convertToRaw","EditorState","convertFromHTML","convertToHTML","CreatePost","isAuth","title","setTitle","message","rawMessage","editorState","setEditorState","convertMessage","messagePost","postText","setPostText","postsCollectionRef","navigate","createPost","author","name","currentUser","displayName","id","uid","onEditorStateChange","getCurrentContent","handleEditorStateMessage","console","log","event","target","value"],"sources":["/Users/macuser/Documents/amccar15.github.io/src/pages/CreatePost.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {addDoc, collection} from 'firebase/firestore';\nimport { db, auth } from '../firebase-config';\nimport {useNavigate} from 'react-router-dom';\n\nimport { ContentState, Editor } from \"react-draft-wysiwyg\";\nimport draftToHtml from 'draftjs-to-html'; \nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { convertFromRaw, convertToRaw, EditorState } from \"draft-js\";\nimport { convertFromHTML, convertToHTML } from \"draft-convert\";\n\nfunction CreatePost({ isAuth }) {\n\n    const [title, setTitle] = useState(\"\");\n\n    //rich text editor state\n    const [editorState, setEditorState] = useState(\n        {\n            message: \"Enter your post here!\",\n            rawMessage: '',\n        },\n    );\n\n    const [postText, setPostText] = useState(\n        {\n            convertMessage: '',\n            messagePost: ''\n        }\n    );\n\n    //firebase collection \n    const postsCollectionRef = collection(db, \"posts\");\n\n    //navigate function to navigate back to root file\n    let navigate = useNavigate();\n\n    //sending data to firebase\n    const createPost = async () => {\n        await addDoc(postsCollectionRef, {\n            title, \n            postText, \n            author: { name: auth.currentUser.displayName, id: auth.currentUser.uid },\n        });\n        navigate(\"/\");\n    };\n\n    //checking if user is logged in\n    useEffect(() => {\n        if(!isAuth) {\n            navigate(\"login\");\n        }\n    }, []);\n\n    //converting to raw html\n    const onEditorStateChange = (editorState) => {\n        setEditorState({\n            editorState,\n            rawMessage: convertToHTML(editorState.getCurrentContent())\n        })\n    }\n    \n    //handling the message from rich text editor\n    const handleEditorStateMessage = () => {\n        setEditorState({\n            message: editorState.rawMessage\n        });\n        setPostText({\n            messagePost: postText.convertMessage\n        });\n        console.log(\"editorstate: \", editorState.rawMessage);\n        console.log(\"postText: \", postText.convertMessage);\n    }\n\n    return (\n        <div className=\"createPostPage\"> \n            <div className=\"cpContainer\">\n                <h1> Create a Post</h1>\n                <div className=\"inputGp\">\n                    <label> Title: </label>\n                    <input placeholder=\"Title...\" \n                        onChange={(event) => {\n                            setTitle(event.target.value)\n                            }\n                        }\n                    />\n                </div>\n                <br></br>\n                <Editor \n                    initialEditorState={editorState}\n                    onEditorStateChange={onEditorStateChange}\n                    toolbarClassName=\"toolbarClassName\"\n                    wrapperClassName=\"wrapperClassName\"\n                    editorClassName=\"editorClassName\" \n                />\n                <button onClick={() => {handleEditorStateMessage();}}> Submit Post</button>\n            </div>\n        </div>\n    );\n}\n\nexport default CreatePost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}