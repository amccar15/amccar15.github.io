{"ast":null,"code":"import _regeneratorRuntime from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{collection,getDocs,query,where}from'firebase/firestore';import{db}from'../firebase-config';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ShowSearch(){var _useParams=useParams(),type=_useParams.type,search=_useParams.search;var postsCollectionRef=collection(db,\"posts\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];useEffect(function(){if(type==='title'){var q=query(postsCollectionRef,where(type,'>=',search));getPosts(q);}if(type==='author'){var _q=query(postsCollectionRef,where(type+\".name\",'>=',search));getPosts(_q);}},[]);var getPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(qSearch){var docData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(qSearch);case 2:docData=_context.sent;setPost(docData.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getPosts(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[post!==null&&post.map(function(p){return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",style:{backgroundColor:\"#7B8D8E\",margin:\"1em\",padding:\"1em\",borderRadius:\"1em\"},children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"postHeader\",children:/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",p.title,\" \"]})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"openBtn\",children:/*#__PURE__*/_jsx(Link,{className:\"viewPost\",to:{pathname:'/thepost/'+p.id},children:\" View Post\"})},p.id)}),/*#__PURE__*/_jsxs(\"div\",{className:\"postTextContainer\",children:[\" \",p.postText,\" \"]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"@\",p.author.name]})]});}),/*#__PURE__*/_jsx(\"div\",{children:post&&post.length===0&&/*#__PURE__*/_jsx(\"h1\",{children:\"No posts where found\"})})]});}export default ShowSearch;","map":{"version":3,"names":["React","useEffect","useState","useParams","collection","getDocs","query","where","db","Link","ShowSearch","type","search","postsCollectionRef","post","setPost","q","getPosts","qSearch","docData","docs","map","doc","data","id","p","backgroundColor","margin","padding","borderRadius","title","pathname","postText","author","name","length"],"sources":["/Users/macuser/Documents/amccar15.github.io/src/pages/showSearch.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport {collection, getDocs, query, where} from 'firebase/firestore';\nimport { db } from '../firebase-config';\nimport { Link } from \"react-router-dom\";\n\nfunction ShowSearch() {\n\n    const {type, search} = useParams();\n\n    const postsCollectionRef = collection(db, \"posts\");\n\n    const [post, setPost] = useState([]);\n\n    useEffect(() => {\n        if(type === 'title') {\n            const q = query(postsCollectionRef, where(type, '>=', search));\n            getPosts(q);\n        }\n        if(type === 'author') {\n            const q = query(postsCollectionRef, where(type+\".name\", '>=', search));\n            getPosts(q);\n        }\n    }, []);\n\n    const getPosts = async (qSearch) => {\n        const docData = await getDocs(qSearch);\n        setPost(docData.docs.map((doc) => (\n                {...doc.data(), id: doc.id}\n            )\n        ));\n    }\n\n    return(\n        <div>\n            {post !== null && post.map((p) => {\n                return <div className=\"post\" style={{backgroundColor: \"#7B8D8E\", margin: \"1em\", padding: \"1em\", borderRadius: \"1em\"}}> \n                <hr />\n                <div className=\"postHeader\">\n                    <div className=\"title\">\n                        <h1> {p.title} </h1>\n                    </div>\n                </div>\n                <div> \n                    <span className=\"openBtn\" key={p.id}>\n                        <Link className=\"viewPost\" to={{pathname: '/thepost/'+p.id}}> View Post</Link>\n                    </span>\n                </div>\n            <div className=\"postTextContainer\"> {p.postText} </div>\n                <h3>@{p.author.name}</h3>\n            </div>            \n            })}\n            <div>\n                {post && post.length === 0 && (\n                    <h1>No posts where found</h1>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default ShowSearch;"],"mappings":"mhBAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAAQC,UAAR,CAAoBC,OAApB,CAA6BC,KAA7B,CAAoCC,KAApC,KAAgD,oBAAhD,CACA,OAASC,EAAT,KAAmB,oBAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,C,wFAEA,QAASC,WAAT,EAAsB,CAElB,eAAuBP,SAAS,EAAhC,CAAOQ,IAAP,YAAOA,IAAP,CAAaC,MAAb,YAAaA,MAAb,CAEA,GAAMC,mBAAkB,CAAGT,UAAU,CAACI,EAAD,CAAK,OAAL,CAArC,CAEA,cAAwBN,QAAQ,CAAC,EAAD,CAAhC,wCAAOY,IAAP,eAAaC,OAAb,eAEAd,SAAS,CAAC,UAAM,CACZ,GAAGU,IAAI,GAAK,OAAZ,CAAqB,CACjB,GAAMK,EAAC,CAAGV,KAAK,CAACO,kBAAD,CAAqBN,KAAK,CAACI,IAAD,CAAO,IAAP,CAAaC,MAAb,CAA1B,CAAf,CACAK,QAAQ,CAACD,CAAD,CAAR,CACH,CACD,GAAGL,IAAI,GAAK,QAAZ,CAAsB,CAClB,GAAMK,GAAC,CAAGV,KAAK,CAACO,kBAAD,CAAqBN,KAAK,CAACI,IAAI,CAAC,OAAN,CAAe,IAAf,CAAqBC,MAArB,CAA1B,CAAf,CACAK,QAAQ,CAACD,EAAD,CAAR,CACH,CACJ,CATQ,CASN,EATM,CAAT,CAWA,GAAMC,SAAQ,4FAAG,iBAAOC,OAAP,sJACSb,QAAO,CAACa,OAAD,CADhB,QACPC,OADO,eAEbJ,OAAO,CAACI,OAAO,CAACC,IAAR,CAAaC,GAAb,CAAiB,SAACC,GAAD,wCACbA,GAAG,CAACC,IAAJ,EADa,MACDC,EAAE,CAAEF,GAAG,CAACE,EADP,IAAjB,CAAD,CAAP,CAFa,sDAAH,kBAARP,SAAQ,4CAAd,CAQA,mBACI,uBACKH,IAAI,GAAK,IAAT,EAAiBA,IAAI,CAACO,GAAL,CAAS,SAACI,CAAD,CAAO,CAC9B,mBAAO,aAAK,SAAS,CAAC,MAAf,CAAsB,KAAK,CAAE,CAACC,eAAe,CAAE,SAAlB,CAA6BC,MAAM,CAAE,KAArC,CAA4CC,OAAO,CAAE,KAArD,CAA4DC,YAAY,CAAE,KAA1E,CAA7B,wBACP,aADO,cAEP,YAAK,SAAS,CAAC,YAAf,uBACI,YAAK,SAAS,CAAC,OAAf,uBACI,0BAAMJ,CAAC,CAACK,KAAR,OADJ,EADJ,EAFO,cAOP,kCACI,aAAM,SAAS,CAAC,SAAhB,uBACI,KAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,CAA2B,EAAE,CAAE,CAACC,QAAQ,CAAE,YAAYN,CAAC,CAACD,EAAzB,CAA/B,wBADJ,EAA+BC,CAAC,CAACD,EAAjC,CADJ,EAPO,cAYX,aAAK,SAAS,CAAC,mBAAf,eAAqCC,CAAC,CAACO,QAAvC,OAZW,cAaP,0BAAMP,CAAC,CAACQ,MAAF,CAASC,IAAf,GAbO,GAAP,CAeH,CAhBiB,CADtB,cAkBI,qBACKpB,IAAI,EAAIA,IAAI,CAACqB,MAAL,GAAgB,CAAxB,eACG,4CAFR,EAlBJ,GADJ,CA0BH,CAED,cAAezB,WAAf"},"metadata":{},"sourceType":"module"}