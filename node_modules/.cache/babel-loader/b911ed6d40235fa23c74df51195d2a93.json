{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport updateMutation from './util/updateMutation';\nimport rangeSort from './util/rangeSort';\nimport getElementHTML from './util/getElementHTML';\nimport getElementTagLength from './util/getElementTagLength';\n\nvar converter = function converter() {\n  var entity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var originalText = arguments.length > 1 ? arguments[1] : undefined;\n  return originalText;\n};\n\nexport default (function (block, entityMap) {\n  var entityConverter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : converter;\n\n  var resultText = _toConsumableArray(block.text);\n\n  var getEntityHTML = entityConverter;\n\n  if (entityConverter.__isMiddleware) {\n    getEntityHTML = entityConverter(converter);\n  }\n\n  if (Object.prototype.hasOwnProperty.call(block, 'entityRanges') && block.entityRanges.length > 0) {\n    var entities = block.entityRanges.sort(rangeSort);\n    var styles = block.inlineStyleRanges;\n\n    var _loop = function _loop(index) {\n      var entityRange = entities[index];\n      var entity = entityMap[entityRange.key];\n      var originalText = resultText.slice(entityRange.offset, entityRange.offset + entityRange.length).join('');\n      var entityHTML = getEntityHTML(entity, originalText);\n      var elementHTML = getElementHTML(entityHTML, originalText);\n      var converted = void 0;\n\n      if (!!elementHTML || elementHTML === '') {\n        converted = _toConsumableArray(elementHTML);\n      } else {\n        converted = originalText;\n      }\n\n      var prefixLength = getElementTagLength(entityHTML, 'start');\n      var suffixLength = getElementTagLength(entityHTML, 'end');\n\n      var updateLaterMutation = function updateLaterMutation(mutation, mutationIndex) {\n        if (mutationIndex > index || Object.prototype.hasOwnProperty.call(mutation, 'style')) {\n          return updateMutation(mutation, entityRange.offset, entityRange.length, converted.length, prefixLength, suffixLength);\n        }\n\n        return mutation;\n      };\n\n      var updateLaterMutations = function updateLaterMutations(mutationList) {\n        return mutationList.reduce(function (acc, mutation, mutationIndex) {\n          var updatedMutation = updateLaterMutation(mutation, mutationIndex);\n\n          if (Array.isArray(updatedMutation)) {\n            return acc.concat(updatedMutation);\n          }\n\n          return acc.concat([updatedMutation]);\n        }, []);\n      };\n\n      entities = updateLaterMutations(entities);\n      styles = updateLaterMutations(styles);\n      resultText = [].concat(_toConsumableArray(resultText.slice(0, entityRange.offset)), _toConsumableArray(converted), _toConsumableArray(resultText.slice(entityRange.offset + entityRange.length)));\n    };\n\n    for (var index = 0; index < entities.length; index++) {\n      _loop(index);\n    }\n\n    return Object.assign({}, block, {\n      text: resultText.join(''),\n      inlineStyleRanges: styles,\n      entityRanges: entities\n    });\n  }\n\n  return block;\n});","map":{"version":3,"names":["_toConsumableArray","updateMutation","rangeSort","getElementHTML","getElementTagLength","converter","entity","arguments","length","undefined","originalText","block","entityMap","entityConverter","resultText","text","getEntityHTML","__isMiddleware","Object","prototype","hasOwnProperty","call","entityRanges","entities","sort","styles","inlineStyleRanges","_loop","index","entityRange","key","slice","offset","join","entityHTML","elementHTML","converted","prefixLength","suffixLength","updateLaterMutation","mutation","mutationIndex","updateLaterMutations","mutationList","reduce","acc","updatedMutation","Array","isArray","concat","assign"],"sources":["/Users/macuser/Documents/amccar15.github.io/node_modules/draft-convert/esm/blockEntities.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport updateMutation from './util/updateMutation';\nimport rangeSort from './util/rangeSort';\nimport getElementHTML from './util/getElementHTML';\nimport getElementTagLength from './util/getElementTagLength';\n\nvar converter = function converter() {\n  var entity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var originalText = arguments.length > 1 ? arguments[1] : undefined;\n  return originalText;\n};\n\nexport default (function (block, entityMap) {\n  var entityConverter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : converter;\n\n  var resultText = _toConsumableArray(block.text);\n\n  var getEntityHTML = entityConverter;\n\n  if (entityConverter.__isMiddleware) {\n    getEntityHTML = entityConverter(converter);\n  }\n\n  if (Object.prototype.hasOwnProperty.call(block, 'entityRanges') && block.entityRanges.length > 0) {\n    var entities = block.entityRanges.sort(rangeSort);\n    var styles = block.inlineStyleRanges;\n\n    var _loop = function _loop(index) {\n      var entityRange = entities[index];\n      var entity = entityMap[entityRange.key];\n      var originalText = resultText.slice(entityRange.offset, entityRange.offset + entityRange.length).join('');\n      var entityHTML = getEntityHTML(entity, originalText);\n      var elementHTML = getElementHTML(entityHTML, originalText);\n      var converted = void 0;\n\n      if (!!elementHTML || elementHTML === '') {\n        converted = _toConsumableArray(elementHTML);\n      } else {\n        converted = originalText;\n      }\n\n      var prefixLength = getElementTagLength(entityHTML, 'start');\n      var suffixLength = getElementTagLength(entityHTML, 'end');\n\n      var updateLaterMutation = function updateLaterMutation(mutation, mutationIndex) {\n        if (mutationIndex > index || Object.prototype.hasOwnProperty.call(mutation, 'style')) {\n          return updateMutation(mutation, entityRange.offset, entityRange.length, converted.length, prefixLength, suffixLength);\n        }\n\n        return mutation;\n      };\n\n      var updateLaterMutations = function updateLaterMutations(mutationList) {\n        return mutationList.reduce(function (acc, mutation, mutationIndex) {\n          var updatedMutation = updateLaterMutation(mutation, mutationIndex);\n\n          if (Array.isArray(updatedMutation)) {\n            return acc.concat(updatedMutation);\n          }\n\n          return acc.concat([updatedMutation]);\n        }, []);\n      };\n\n      entities = updateLaterMutations(entities);\n      styles = updateLaterMutations(styles);\n      resultText = [].concat(_toConsumableArray(resultText.slice(0, entityRange.offset)), _toConsumableArray(converted), _toConsumableArray(resultText.slice(entityRange.offset + entityRange.length)));\n    };\n\n    for (var index = 0; index < entities.length; index++) {\n      _loop(index);\n    }\n\n    return Object.assign({}, block, {\n      text: resultText.join(''),\n      inlineStyleRanges: styles,\n      entityRanges: entities\n    });\n  }\n\n  return block;\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}