{"ast":null,"code":"import _regeneratorRuntime from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macuser/Documents/amccar15.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{addDoc,collection}from'firebase/firestore';import{db,auth}from'../firebase-config';import{useNavigate}from'react-router-dom';import{getStorage,ref,uploadBytes}from'firebase/storage';import\"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CreatePost(_ref){var isAuth=_ref.isAuth;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),postText=_useState4[0],setPostText=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),imageExist=_useState6[0],setImageExist=_useState6[1];var postsCollectionRef=collection(db,\"posts\");var navigate=useNavigate();var createPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return addDoc(postsCollectionRef,{title:title,postText:postText,author:{name:auth.currentUser.displayName,id:auth.currentUser.uid},imageExist:imageExist});case 2:navigate(\"/\");case 3:case\"end\":return _context.stop();}}},_callee);}));return function createPost(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(!isAuth){navigate(\"login\");}},[]);var storage=getStorage();var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var storageRef=ref(storage,'image/image.png');var upload=function upload(){uploadBytes(storageRef,image).then(function(snapshot){console.log(\"Uploaded file\");});};return/*#__PURE__*/_jsx(\"div\",{className:\"createPostPage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cpContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Create a Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputGp\",children:[/*#__PURE__*/_jsx(\"label\",{children:\" Title: \"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title...\",onChange:function onChange(event){setTitle(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputGp\",children:[/*#__PURE__*/_jsx(\"label\",{children:\" Post: \"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Post...\",onChange:function onChange(event){setPostText(event.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(event){setImage(event.target.files[0]);setImageExist(true);}})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){upload();createPost();},children:\" Submit Post\"})]})});}export default CreatePost;","map":{"version":3,"names":["React","useState","useEffect","addDoc","collection","db","auth","useNavigate","getStorage","ref","uploadBytes","CreatePost","isAuth","title","setTitle","postText","setPostText","imageExist","setImageExist","postsCollectionRef","navigate","createPost","author","name","currentUser","displayName","id","uid","storage","image","setImage","storageRef","upload","then","snapshot","console","log","event","target","value","files"],"sources":["/Users/macuser/Documents/amccar15.github.io/src/pages/CreatePost.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {addDoc, collection} from 'firebase/firestore';\nimport { db, auth } from '../firebase-config';\nimport {useNavigate} from 'react-router-dom';\nimport { getStorage, ref, uploadBytes } from 'firebase/storage'\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\n\nfunction CreatePost({ isAuth }) {\n\n    const [title, setTitle] = useState(\"\");\n    const [postText, setPostText] = useState(\"\");\n    const [imageExist, setImageExist] = useState(\"\");\n\n    const postsCollectionRef = collection(db, \"posts\");\n\n    let navigate = useNavigate();\n\n    const createPost = async () => {\n        await addDoc(postsCollectionRef, {\n            title, \n            postText, \n            author: { name: auth.currentUser.displayName, id: auth.currentUser.uid },\n            imageExist\n        });\n        navigate(\"/\");\n    };\n\n    useEffect(() => {\n        if(!isAuth) {\n            navigate(\"login\");\n        }\n    }, []);\n\n    const storage = getStorage();\n    const [image, setImage] = useState('');\n\n    const storageRef = ref(storage, 'image/image.png');\n\n    const upload = () => {\n        uploadBytes(storageRef, image).then((snapshot) => {\n            console.log(\"Uploaded file\");\n        });\n    }\n\n    return (\n        <div className=\"createPostPage\"> \n            <div className=\"cpContainer\">\n                <h1> Create a Post</h1>\n                <div className=\"inputGp\">\n                    <label> Title: </label>\n                    <input placeholder=\"Title...\" \n                        onChange={(event) => {\n                            setTitle(event.target.value)\n                            }\n                        }\n                    />\n                </div>\n                <div className=\"inputGp\">\n                    <label> Post: </label>\n                    <textarea placeholder=\"Post...\"\n                        onChange={(event) => {\n                            setPostText(event.target.value)\n                                }\n                        }\n                    />\n                </div>\n                <div>\n                    <input type=\"file\" \n                        onChange={(event) => {\n                            setImage(event.target.files[0])\n                            setImageExist(true);\n                            }\n                        } \n                    />\n                </div>\n                <button onClick={() => {upload(); createPost();}}> Submit Post</button>\n            </div>\n        </div>\n    );\n}\n\nexport default CreatePost;"],"mappings":"mZAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAAQC,MAAR,CAAgBC,UAAhB,KAAiC,oBAAjC,CACA,OAASC,EAAT,CAAaC,IAAb,KAAyB,oBAAzB,CACA,OAAQC,WAAR,KAA0B,kBAA1B,CACA,OAASC,UAAT,CAAqBC,GAArB,CAA0BC,WAA1B,KAA6C,kBAA7C,CACA,MAAO,kDAAP,C,wFAEA,QAASC,WAAT,MAAgC,IAAVC,OAAU,MAAVA,MAAU,CAE5B,cAA0BX,QAAQ,CAAC,EAAD,CAAlC,wCAAOY,KAAP,eAAcC,QAAd,eACA,eAAgCb,QAAQ,CAAC,EAAD,CAAxC,yCAAOc,QAAP,eAAiBC,WAAjB,eACA,eAAoCf,QAAQ,CAAC,EAAD,CAA5C,yCAAOgB,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,mBAAkB,CAAGf,UAAU,CAACC,EAAD,CAAK,OAAL,CAArC,CAEA,GAAIe,SAAQ,CAAGb,WAAW,EAA1B,CAEA,GAAMc,WAAU,6FAAG,2JACTlB,OAAM,CAACgB,kBAAD,CAAqB,CAC7BN,KAAK,CAALA,KAD6B,CAE7BE,QAAQ,CAARA,QAF6B,CAG7BO,MAAM,CAAE,CAAEC,IAAI,CAAEjB,IAAI,CAACkB,WAAL,CAAiBC,WAAzB,CAAsCC,EAAE,CAAEpB,IAAI,CAACkB,WAAL,CAAiBG,GAA3D,CAHqB,CAI7BV,UAAU,CAAVA,UAJ6B,CAArB,CADG,QAOfG,QAAQ,CAAC,GAAD,CAAR,CAPe,sDAAH,kBAAVC,WAAU,2CAAhB,CAUAnB,SAAS,CAAC,UAAM,CACZ,GAAG,CAACU,MAAJ,CAAY,CACRQ,QAAQ,CAAC,OAAD,CAAR,CACH,CACJ,CAJQ,CAIN,EAJM,CAAT,CAMA,GAAMQ,QAAO,CAAGpB,UAAU,EAA1B,CACA,eAA0BP,QAAQ,CAAC,EAAD,CAAlC,yCAAO4B,KAAP,eAAcC,QAAd,eAEA,GAAMC,WAAU,CAAGtB,GAAG,CAACmB,OAAD,CAAU,iBAAV,CAAtB,CAEA,GAAMI,OAAM,CAAG,QAATA,OAAS,EAAM,CACjBtB,WAAW,CAACqB,UAAD,CAAaF,KAAb,CAAX,CAA+BI,IAA/B,CAAoC,SAACC,QAAD,CAAc,CAC9CC,OAAO,CAACC,GAAR,CAAY,eAAZ,EACH,CAFD,EAGH,CAJD,CAMA,mBACI,YAAK,SAAS,CAAC,gBAAf,uBACI,aAAK,SAAS,CAAC,aAAf,wBACI,sCADJ,cAEI,aAAK,SAAS,CAAC,SAAf,wBACI,mCADJ,cAEI,cAAO,WAAW,CAAC,UAAnB,CACI,QAAQ,CAAE,kBAACC,KAAD,CAAW,CACjBvB,QAAQ,CAACuB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAR,CACC,CAHT,EAFJ,GAFJ,cAWI,aAAK,SAAS,CAAC,SAAf,wBACI,kCADJ,cAEI,iBAAU,WAAW,CAAC,SAAtB,CACI,QAAQ,CAAE,kBAACF,KAAD,CAAW,CACjBrB,WAAW,CAACqB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX,CACK,CAHb,EAFJ,GAXJ,cAoBI,kCACI,cAAO,IAAI,CAAC,MAAZ,CACI,QAAQ,CAAE,kBAACF,KAAD,CAAW,CACjBP,QAAQ,CAACO,KAAK,CAACC,MAAN,CAAaE,KAAb,CAAmB,CAAnB,CAAD,CAAR,CACAtB,aAAa,CAAC,IAAD,CAAb,CACC,CAJT,EADJ,EApBJ,cA6BI,eAAQ,OAAO,CAAE,kBAAM,CAACc,MAAM,GAAIX,UAAU,GAAI,CAAhD,0BA7BJ,GADJ,EADJ,CAmCH,CAED,cAAeV,WAAf"},"metadata":{},"sourceType":"module"}